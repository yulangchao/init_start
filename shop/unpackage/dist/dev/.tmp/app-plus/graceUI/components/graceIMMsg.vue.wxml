<template name="22203990"><view class="_view 22203990 grace-im"><scroll-view scroll-y scroll-top="{{scrollTop}}" class="_scroll-view 22203990" style=" {{('height:' + (imHeight + 'px') + ';')}}"><view style="height:10px;" class="_view 22203990"></view><view class="_view 22203990 grace-im-msg"><view class="_view 22203990 grace-im-system-msg" bindtap="handleProxy" data-eventid="{{'22203990-0'}}" data-comkey="{{$k}}">{{historyLodginText}}</view></view><block wx:key="index" key="{{index}}" wx:for="{{msgs}}" wx:for-index="index" wx:for-item="item"><view class="_view 22203990 grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 1}}"><view class="_view 22203990 face"><image src="{{item.face}}" mode="widthFix" class="_image 22203990"></image></view><view class="_view 22203990"><view class="_view 22203990 grace-im-name"><text wx:if="{{userid != item.id}}" class="_text 22203990">{{item.name}}</text><text class="_text 22203990">{{item.date}}</text></view><view class="_view 22203990 grace-im-content-in"><view class="_view 22203990 content">{{item.msg}}</view></view></view></view><view class="_view 22203990 grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 2}}"><view class="_view 22203990 face"><image src="{{item.face}}" mode="widthFix" class="_image 22203990"></image></view><view class="_view 22203990"><view class="_view 22203990 grace-im-name"><block wx:if="{{userid != item.id}}">{{item.name}}</block><text class="_text 22203990">{{item.date}}</text></view><view class="_view 22203990 grace-im-content-in"><view class="_view 22203990 imgs"><image src="{{item.msg}}" mode="widthFix" data-index="{{index}}" bindtap="handleProxy" data-eventid="{{'22203990-1-'+index}}" data-comkey="{{$k}}" class="_image 22203990"></image></view></view></view></view><view class="_view 22203990 grace-im-msg {{[userid == item.id ? 'grace-im-msg-right' : 'grace-im-msg-left']}}" wx:if="{{item.ctype == 3}}"><view class="_view 22203990 face"><image src="{{item.face}}" mode="widthFix" class="_image 22203990"></image></view><view class="_view 22203990"><view class="_view 22203990 grace-im-name"><block wx:if="{{userid != item.id}}">{{item.name}}</block><text class="_text 22203990">{{item.date}}</text></view><view class="_view 22203990 grace-im-content-in"><view class="_view 22203990 content grace-im-voice-msg {{index == playIndex ? 'grace-im-playing' : ''}}" data-voice="{{item.msg}}" data-index="{{index}}" bindtap="handleProxy" style="width:300rpx;" data-eventid="{{'22203990-2-'+index}}" data-comkey="{{$k}}"><text class="_text 22203990 graceIMFont icon-audio"></text></view></view></view></view><view class="_view 22203990 grace-im-msg" wx:if="{{item.ctype == 4}}"><view class="_view 22203990 grace-im-system-msg">{{item.msg}}</view></view></block><view style="height:20px;" class="_view 22203990"></view></scroll-view></view></template>